define(["relationship"],function(relationship){function convert(data1,mapping,originData1){var originData1=originData1||data1,data2={};if("object"==typeof mapping)for(var k in mapping){var v=mapping[k];if("object"==typeof v)data2[k]=convert(data1[k],v,originData1);else if("function"==typeof v)data2[k]=v.apply(data2,[originData1,k,data1]);else if("string"==typeof v)if(v.length>1&&"&"==v.substring(0,1)){var v1=v.substring(1),v2;try{for(var a=v1.split("."),exp="",i=0;i<a.length;i++)exp+="['",exp+=a[i],exp+="']";v2=eval((originData1?"originData1":"data1")+exp)}catch(e){}data2[k]=v2}else data2[k]=v;else data2[k]=v}else"function"==typeof mapping&&(data2=mapping.apply(data2,[originData1,k,data1]));return data2}function translate(a,b){var c;for(var d in relationship)if(new RegExp(d).test(a)){c=relationship[d];break}return c?convert(b,c):b}return{convert:convert,translate:translate}});