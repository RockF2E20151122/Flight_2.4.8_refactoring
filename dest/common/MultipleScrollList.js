define(["libs","cBase","cUILayer","cUIScrollList"],function(a,b,c,d){var e={},f={prefix:"cui-"},g={};g.class=f.prefix+"warning",g.onCreate=function(){this.root.html(['<div class="cui-pop-box '+this.className+'" style="position: fixed; bottom: 0; left: 0; width: 100%;">','<div class="flight-cui-hd">','<div class="flight-cancel-btn">'+this.cancel+"</div>",'<div class="flight-center-title">'+this.title+"</div>",'<div class="flight-ok-btn" >'+this.ok+"</div>","</div>",'<div class="flight-cui-bd">','<div class="cui-roller scrollWrapper">',"</div>",'<p class="cui-roller-tips">',""+this.tips+"</p>","</div>","</div>"].join("")),this.title=this.root.find(".flight-center-title"),this.tips=this.root.find(".cui-roller-tips"),this.btCancel=this.root.find(".flight-cancel-btn"),this.btOk=this.root.find(".flight-ok-btn"),this.line=$('<div class="cui-lines">&nbsp;</div>'),this.wrapper=this.root.find(".scrollWrapper"),this.mask=$('<div class="cui-view cui-mask" style="position: absolute; left: 0px; top: 0px; width: 100%; height: 5000px; z-index: 2000; display: none;"><div></div></div>')},g.show=function(a){try{this.create(),this.showAction($.proxy(function(){this.onShow(),a&&a.call(this)},this))}catch(b){}},g.showAction=function(a){this.root.show(),this.mask.show(),"function"==typeof a&&a()},g.create=function(){!this.isCreate&&(this.rootBox=this.rootBox||$("body"))&&(this.root=this.createRoot(),this.root.hide(),this.onCreate(),this.rootBox.append(this.root),this.root.append(this.createHtml()),this.rootBox.append(this.mask),this.isCreate=!0)},g.onShow=function(){var a=this;if(!this.data||0==this.data.length)return!1;for(var b=0,c=this.data.length;c>b;b++){var e={wrapper:this.wrapper,data:this.data[b],type:"radio",disItemNum:this.disItemNum,changed:function(b){return function(c){var d=a.changed[b];"function"==typeof d&&d.call(a,c)}}(b)};0==b&&3==c&&(e.className="cui-roller-bd  cui-flex");var f=new d(e);this.scroll.push(f)}for(var b=0,c=this.data.length;c>b;b++)this.scroll[b].setIndex(this.index[b]),this.scroll[b].setKey(this.key[b]);this.wrapper.append(this.line),this.btOk.on("click",function(){for(var b=[],c=0,d=a.scroll.length;d>c;c++)b.push(a.scroll[c].getSelected());a.okClick.call(a,b),a.hide()}),this.btCancel.on("click",function(){for(var b=[],c=0,d=a.scroll.length;d>c;c++)b.push(a.scroll[c].getSelected());a.cancelClick.call(a,b),a.hide()}),this.setzIndexTop(),this.root.bind("touchmove",function(a){a.preventDefault()}),this.onHashChange=function(){this.hide()},$(window).on("hashchange",$.proxy(this.onHashChange,this))},g.hide=function(){this.onHide()},g.onHide=function(){for(var a=0,b=this.scroll.length;b>a;a++)this.scroll[a].removeEvent();this.btOk.off("click"),this.btCancel.off("click"),this.root.unbind("touchmove"),this.root.remove(),this.mask.remove(),$(window).off("hashchange",$.proxy(this.onHashChange,this))},e.__propertys__=function(){var a=this;this.changed=[],this.scroll=[],this.data=[],this.index=[],this.key=[],this.disItemNum=5,this.tips="",this.btCancel,this.btOk,this.cancel="取消",this.ok="确定",this.cancelClick=function(){a.hide()},this.okClick=function(){a.hide()}},e.initialize=function($super,a){this.setOption(function(a,b){this[a]=b}),$super($.extend(g,a))},e.setTips=function(a){this.tips.html(a)},e.updateScrollListByIndex=function(a,b,c){c="undefined"==typeof c?0:c,this.scroll[a].reload(b),this.scroll[a].setIndex(c)},e.getItemByIndex=function(a){return this.scroll[a].getSelected()};var h=new b.Class(c,e);return h});