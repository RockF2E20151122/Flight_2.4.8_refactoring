define(["cModel","cBase","mapping","cAjax"],function(a,b,c,d){var e=new b.Class(a,{__propertys__:function(){},initialize:function(){},excute:function(b,e,f,g,h){var i,j,k,i=_.clone(this.getParam()||{}),l=this.getTag(),m=this.result&&this.result.get(l),n=this.buildurl(),o=this.head.get();this.isAbort=!1;var p=this;!m||this.ajaxOnly||f?("get"!==this.method.toLowerCase()&&this.usehead&&this.contentType!==a.CONTENT_TYPE_JSONP&&(i.head=this.head.get()),j=$.proxy(function(d){var f,h=d.head;this.contentType!==a.CONTENT_TYPE_JSONP&&this.usehead&&h.auth&&h.auth!==o.auth&&this.head.setAuth(h.auth),h&&0===h.errcode?(f=d,f=function(){return c.translate(n,f)}(),"function"==typeof this.dataformat&&(f=this.dataformat(f)),this.result&&this.result.set(f,l),b&&b.call(g||this,f,d,!0)):e&&e.call(g||this,d)},this),k=$.proxy(function(a){return p.isAbort?(p.isAbort=!1,void(h&&h.call(g||this,a))):void(e&&e.call(g||this,a))},g||this),this.ajax=this.contentType===a.CONTENT_TYPE_JSON?d.cros(n,this.method,i,j,k):this.contentType===a.CONTENT_TYPE_JSONP?d.jsonp(n,i,j,k):d.post(n,i,j,k)):b.call(g||this,m,null,!1)},getDataWithSync:function(a,b,c){var d=this.buildurl(),e=_.clone(this.getParam()||{});e.head=this.head.get(),$.ajax({url:d,async:!c,data:JSON.stringify(e),type:"post",dataType:"json",contentType:"application/json",timeout:e.timeout||2e5,success:a.bind(this),error:b.bind(this)})},buildurl:function(){var a=this.baseurl(),b=this.protocol+"://"+a.domain+"/"+a.path+("function"==typeof this.url?this.url():this.url);return b},baseurl:function(){var a=location.host,b="m.ctrip.com",c="restapi";return a.match(/^m\.ctrip\.com/i)||a.match(/^secure\.ctrip\.com/i)?(b="m.ctrip.com",c="restapi"):a.match(/^(localhost|172\.16|127\.0)/i)||window.DEBUG_MODE?(b="ws.mobile.flight.fat36.qa.nt.ctripcorp.com",c="FlightWirelessApi"):a.match(/^10\.8\.2\.111/i)||a.match(/^10\.8\.5\.10/i)?(b="m.ctrip.com",c="restapi"):a.match(/^m\.uat\.qa\.ctripcorp\.com/i)?(b="ws.mobile.flight.uat.ctripcorp.com",c="FlightWirelessApi"):a.match(/^m\.fat/i)||a.match(/^waptest\.ctrip|^210\.13\.100\.191/i)||a.match(/^wapsecuretest\.ctrip|^210\.13\.100\.191/i)||window.DEBUG_MODE?(b="ws.mobile.flight.fat36.qa.nt.ctripcorp.com",c="FlightWirelessApi"):(b="m.ctrip.com",c="restapi"),{domain:b,path:c}}});return e});