define(["libs","flight/widgets/c.widget.validate"],function(a,b){var c=function(a){var c;if(this.config={id:"",type:"",event:"blur",msg:"请输入正确的信息",callback:null,customFn:null,close:null,position:"absolute",bottom:0,isRoll:!0,showContainer:"parent",insertDom:"li",triggerFlag:"false",fnCallback:function(){}},!_.isObject(a))return{errMsg:"form校验传参错误"};var a=_.extend(this.config,a);this.init=function(){var b=this;return a.id?($("#"+a.id).on(a.event,this,function(){b.validate(this.value)}),void(c=$("#"+a.id).parents(a.insertDom).eq(0))):{errMsg:"表单校验传参dom元素不存在"}},this.validate=function(c){return a.type&&b[a.type]?b[a.type](c)?!0:void this.process():{errMsg:"表单校验类型不存在"}},this.process=function(a){if(_.isObject(a)){if(0===a.iRet)for(var b=0,c=a.data.length;c>b;b++)this.show(a.data[b])}else this.show()},this.show=function(b){_.isObject(b)&&(_.extend(a,b),c=$("#"+a.id).parents(a.insertDom).eq(0)),_.isFunction(a.customFn)?a.customFn():0===c.find(".form-tips").length?c.append('<div class="form-tips" style="position:'+a.position+"; bottom:"+a.bottom+'"><span>'+a.msg+"</span></div>"):(a.triggerFlag&&this.rollMiddle(a.id),c.find(".form-tips").text(a.msg).show(),_.isFunction(a.callback)&&a.callback())},this.rollMiddle=function(a){var b=$("body").height(),c=$("#"+a).offset().top+$("#"+a).height();document.body.scrollTop=c>b/2?$("body").scrollTop()+(c-b/2):0},this.close=function(){c.find(".form-tips").hide()},this.init()};return c});