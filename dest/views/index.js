define(["libs","c","CommonStore","FlightStore","flight/utility/utility","FlightModel","cMultipleDate",buildViewTemplatesPath("index.html"),"cWidgetFactory","cWidgetCalendar","lowpricecalendar"],function(a,b,c,d,e,f,g,h,i,j,k){try{window["h5.flt.homepage.speed"]=window["h5.flt.homepage.speed"]||{},window["h5.flt.homepage.speed"].begin=Date.now()}catch(l){}var m="h5.flt.homepage",n=(b.ui,b.base),o=c.SalesObjectStore.getInstance(),p=d.MdIndexStore.getInstance(),q=i.create("Calendar"),r=new b.base.Class(b.ui.Layer,{__propertys__:function(){var a=this;this.contentDom,this.mask=new b.ui.Mask,this.mask.addEvent("onShow",function(){$(window).bind("resize",this.onResize),this.onResize();var b=this;this.root.bind("click",function(){b.hide(),b.root.unbind("click"),a.hide()})})},initialize:function($super,a){$super({onCreate:function(){},onShow:function(){for(var b in a)this[b]=a[b];this.mask.show(),this.setzIndexTop(),"string"==typeof this.html&&(this.html=$(this.html)),this.contentDom.html(this.html),this.closeDom&&this.contentDom.find(this.closeDom).on("click",function(){t&&t.hide()}),window.clearInterval(this.setIntervalResource);var c=$("body"),d=c.width()/2,e=c.height()/2.5;this.root.css({"margin-left":-d,"margin-top":-e})},onHide:function(){this.mask&&this.mask.hide()}})}}),t=null,u=d.FlightCCBStore.getInstance(),v=b.view.extend({pageid:"212003",tpl:h,hasAd:!0,adContainer:"in_footer",flightStore:d.FlightSearchStore.getInstance(),flightAdStore:d.FlightAdTimeOutStore.getInstance(),flightCityListStore:d.FlightCityListStore.getInstance(),flightInterCityListStore:d.FlightInterCityListStore.getInstance(),flightDeliveryStore:d.FlightPickTicketSelectStore.getInstance(),flightSearchSubjoin:d.FlightSearchSubjoinStore.getInstance(),flightFilterStore:d.FlightFilterStore.getInstance(),lowestPriceSearchStore:d.LowestPriceSearchStore.getInstance(),calendar:null,getAppUrl:function(){0;var a="";if(window.localStorage&&null!=window.localStorage.getItem("SALES")&&""!=window.localStorage.getItem("SALES")){var b=JSON.parse(window.localStorage.getItem("SALES"));null!=b.data&&(a=b.data.sourceid)}var c=this.flightStore.getSearchDetails(0,"date").replace(/\//g,""),d=this.flightStore.getSearchDetails(0,"dkey"),e=this.flightStore.getSearchDetails(0,"akey"),f=this.flightStore.getAttr("tabtype")||1,g="";if(1==f)g="/flight_inquire?c1="+f+"&c2="+d+"&c3="+e+"&c4="+c+"&extendSourceID="+a;else{var h=this.flightStore.getSearchDetails(1,"date").replace(/\//g,"");g="/flight_inquire?c1="+f+"&c2="+d+"&c3="+e+"&c4="+c+"&c5="+h+"&extendSourceID="+a}return 0,g},getQueryStringByName:function(a){var b=location.search.match(new RegExp("[?&]"+a+"=([^&]+)","i"));return null==b||b.length<1?"":b[1]},curTab:1,showTopPanel:!0,lockKey:!0,render:function(){this.viewdata.req=this.request,this.$el.html(this.tpl),this.els={elcitytabItems:this.$el.find(".city_tab li"),elpanelbox:this.$el.find("#panel-box"),elcitysel:this.$el.find("#citysel"),eldepartDatetop:this.$el.find("#js_departDate em"),eldepartDatebottom:this.$el.find("#js_departDate b"),elbackDatetop:this.$el.find("#js_backDate em"),elbackDatebottom:this.$el.find("#js_backDate b"),eldepartcity_w:this.$el.find("#js_departcity_w"),elbackcity_w:this.$el.find("#js_backcity_w"),elheader:this.$el.find("header"),elflightroot:this.$el.find(".flightroot")}},events:{"click #js_return":"backAction","click .city_tab li":"switchtabAction","click #js_departDate":"departDateAction","click #js_backDate":"backDateAction","click #js_departcity_w span":"selectDepartCityAction","click #js_backcity_w span":"selectBackCityAction","click #searchlistsubmit":"searchflightAction","click #js_exchange_btn":"exchangeAction","click .passenger":"selectPassenger","click .flight-img-svc":"promiseAction","click #checkin":"checkin","click #flightSchedule":"flightSchedule"},clearCurFilter:function(){this.flightFilterStore.remove(),this.flightSearchSubjoin.remove()},clearIntlFilter:function(){this.flightSearchSubjoin.removeAttr("departfilter-type"),this.flightSearchSubjoin.removeAttr("departfilter-value"),this.flightSearchSubjoin.removeAttr("departfilter-type-cabin"),this.flightFilterStore.removeAttr("departfilter-type"),this.flightFilterStore.removeAttr("departfilter-value"),this.flightSearchSubjoin.removeAttr("departfilter-type"),this.flightSearchSubjoin.removeAttr("departfilter-value"),this.flightSearchSubjoin.removeAttr("departfilter-type-cabin"),this.flightFilterStore.removeAttr("departfilter-type"),this.flightFilterStore.removeAttr("departfilter-value")},closeAdPanelAction:function(){this.flightAdStore.setAttr("top",!1),this.closeTopPanel(),this.els.eltoppanel.css("display","none")},backAction:function(){p.setAttr("IsReturn",!0);var a=o.get();try{this.mdSubmit()}catch(b){0}a&&a.sid&&1896==+a.sid?window.location="map://leftClick()":u.getAttr("isCCB")?this.jump("/webapp/mkt/ccb/"):this.jump("/html5/",!0)},exchangeAction:function(){p.increaseCntByKey("ChangeCityClick");var a=p.getAttr("DCity"),b=p.getAttr("ACity");p.setAttr("DCity",b),p.setAttr("ACity",a);var c,d,e,f,g,h,i,j,k,l,m=this.$el.find("#js_departcity_w"),n=this.$el.find("#js_departcity_w span"),o=this.$el.find("#js_backcity_w"),q=this.$el.find("#js_backcity_w span"),r=n.clone().removeClass(),s="<em>"+n.text()+"</em>",t=q.clone().removeClass(),u="<em>"+q.text()+"</em>",v=this;this.lockKey&&(this.lockKey=!1,n.addClass("switch_right"),q.addClass("switch_left"),setTimeout(function(){n.hasClass("switch_right")&&(m.html(r.html(u)),o.html(t.html(s))),v.lockKey=!0},500)),c=this.flightStore.getSearchDetails(0,"dCtyCode"),d=this.flightStore.getSearchDetails(0,"dCtyId"),e=this.flightStore.getSearchDetails(0,"dcityName"),f=this.flightStore.getSearchDetails(0,"dkey"),g=this.flightStore.getSearchDetails(0,"aCtyCode"),h=this.flightStore.getSearchDetails(0,"aCtyId"),i=this.flightStore.getSearchDetails(0,"acityName"),j=this.flightStore.getSearchDetails(0,"akey"),k=this.flightStore.getAttr("amode"),l=this.flightStore.getAttr("dmode"),this.flightStore.setSearchDetails(0,"dCtyCode",g),this.flightStore.setSearchDetails(0,"dCtyId",h),this.flightStore.setSearchDetails(0,"dcityName",i),this.flightStore.setSearchDetails(0,"dkey",j),this.flightStore.setSearchDetails(0,"aCtyCode",c),this.flightStore.setSearchDetails(0,"aCtyId",d),this.flightStore.setSearchDetails(0,"acityName",e),this.flightStore.setSearchDetails(0,"akey",f),this.flightStore.setSearchDetails(1,"dCtyCode",c),this.flightStore.setSearchDetails(1,"dCtyId",d),this.flightStore.setSearchDetails(1,"dcityName",e),this.flightStore.setSearchDetails(1,"dkey",f),this.flightStore.setSearchDetails(1,"aCtyCode",g),this.flightStore.setSearchDetails(1,"aCtyId",h),this.flightStore.setSearchDetails(1,"acityName",i),this.flightStore.setSearchDetails(1,"akey",j),this.flightStore.setAttr("amode",l),this.flightStore.setAttr("dmode",k)},searchflightAction:function(){p.setAttr("IsQuery",!0);var a=this.flightStore.getSearchDetails(0,"dCtyCode"),b=this.flightStore.getSearchDetails(0,"aCtyCode"),c=(this.flightStore.getAttr("tabtype"),this.flightStore.getAttr("amode")),d=this.flightStore.getAttr("dmode"),e=n.getServerDate().getTime();if(a===b)return void this.showToast("出发城市和到达城市相同，请重新选择");if(2==this.curTab){var f=this.flightStore.getSearchDetails(0,"aCtyCode"),g=this.flightStore.getSearchDetails(0,"acityName"),h=this.flightStore.getSearchDetails(0,"akey"),i=this.flightStore.getSearchDetails(0,"dCtyCode"),j=this.flightStore.getSearchDetails(0,"dcityName"),k=this.flightStore.getSearchDetails(0,"dkey"),l=parseInt(this.flightStore.getSearchDetails(0,"dCtyId")||0),m=parseInt(this.flightStore.getSearchDetails(0,"aCtyId")||0),o=this.flightStore.getSearchDetails(0,"dDportCode")||"",q=this.flightStore.getSearchDetails(0,"aAportCode")||"";this.flightStore.setSearchDetails(1,"aCtyCode",i),this.flightStore.setSearchDetails(1,"acityName",j),this.flightStore.setSearchDetails(1,"akey",k),this.flightStore.setSearchDetails(1,"dCtyCode",f),this.flightStore.setSearchDetails(1,"dcityName",g),this.flightStore.setSearchDetails(1,"dkey",h),this.flightStore.setSearchDetails(1,"dCtyId",m),this.flightStore.setSearchDetails(1,"aCtyId",l),this.flightStore.setSearchDetails(1,"dDportCode",q),this.flightStore.setSearchDetails(1,"aAportCode",o)}else this.flightStore.removeSearchDetails(1);this.flightStore.setAttr("submittime",e),this.flightStore.setCurSearchDetails([0]),this.flightStore.setAttr("ticketIssueCty",a);var r=!!this.flightStore.getAttr("tofltintl");this.clearCurFilter(),this.clearIntlFilter();try{this.mdSubmit()}catch(s){0}2==c||2==d||r?(this.flightStore.saveToFltintlSearch(),this.jump("/webapp/fltintl/#flightlist?v="+(new Date).getTime())):(this.flightStore.setAttr("passengerType",1),this.lowestPriceSearchStore.setAttr("aCty",b),this.lowestPriceSearchStore.setAttr("dCty",a),this.forward("list?v="+(new Date).getTime()))},selectDepartCityAction:function(){this.checkUcStore(),this.forward("citylist/!depart")},selectBackCityAction:function(){this.checkUcStore(),this.forward("citylist/!back")},switchtabAction:function(a){var b=$(a.currentTarget),c=1==b.data("type")?"OWClick":"RTClick",d=1==b.data("type")?"OW":"RT";p.increaseCntByKey(c),p.setAttr("FlightType",d),1==b.data("type")&&p.setAttr("ATime",""),this.switchTab(b.data("type"))},departDateAction:function(){this.isShowData&&(this.isShowData=!1,k.CreateCalendar(this,this.setPanelDate,"start"),this.checkUcStore())},backDateAction:function(){this.isShowData&&(this.isShowData=!1,k.CreateCalendar(this,this.setPanelDate,"back"),this.checkUcStore())},promiseAction:function(){p.setAttr("IsService",!0);var a=['<div class="flight-windows-svc"><img src="http://pic.c-ctrip.com/h5/flight/tc-fwcn.png" width="100%"></div>'].join(""),a=$(a);t||(t=new r({html:a,closeDom:".flight-windows-svc"})),t.show()},switchTab:function(a){this.flightStore.setAttr("tabtype",a),this.els.elcitytabItems.removeClass("cityTabCrt"),this.els.elcitytabItems.filter("[data-type='"+a+"']").addClass("cityTabCrt");switch(a){case 1:this.els.elpanelbox.removeClass("backtrack");var b=this.flightStore.getSearchDetails(0,"date");b=b?n.Date.parse(b).valueOf():new n.Date(this.getServerDate()).addDay(1).valueOf(),this.setPanelDate(null,null,{start:b}),this.flightStore.setAttr("tripType",1);break;case 2:var b=this.flightStore.getSearchDetails(0,"date"),c=this.flightStore.getSearchDetails(1,"date"),d=new n.Date(n.Date.format(this.getServerDate(),"Y-m-d")).addDay(364).valueOf();b=b?n.Date.parse(b).valueOf():new n.Date(this.getServerDate()).addDay(1).valueOf(),c?(c=n.Date.parse(c).valueOf(),b>c&&(c=b>=d?new Date(b.valueOf()):new n.Date(b).addDay(1).valueOf()),this.flightStore.setSearchDetails(1,"date",n.Date.format(c,"Y/m/d H:i:s"))):c=new n.Date(b.valueOf()).addDay(1).valueOf(),this.flightStore.setAttr("tripType",2),b.setHours(0,0,0,0),c.setHours(0,0,0,0),b>c&&(c=new n.Date(b).addDay(1).valueOf()),b>d&&(b=new Date(d.valueOf())),c>=d&&(c=new Date(d.valueOf())),this.flightStore.setSearchDetails(0,"date",n.Date.format(b,"Y/m/d H:i:s")),this.flightStore.setSearchDetails(1,"date",n.Date.format(c,"Y/m/d H:i:s")),this.els.elpanelbox.addClass("backtrack"),this.setPanelDate(null,null,{start:b,back:c})}this.curTab=a},renderPage:function(a,b,c,d,e){var f=this,g=!1;if(p.setAttr("DCity",b),p.setAttr("ACity",c),null!=d&&null!=e){var h="",i="",j="",k="",l="",m="";if(d&&d.length>0)for(var n=0,o=d.length;o>n;n++)c&&""!=c&&(d[n].code.toLowerCase()==c.toLowerCase()||d[n].name==decodeURI(c)||d[n].id==c)&&(i=d[n].name,h=d[n].code,j=d[n].id,f.flightStore.setAttr("amode","1")),b&&""!=b&&(d[n].code.toLowerCase()==b.toLowerCase()||d[n].name==decodeURI(b)||d[n].id==b)&&(l=d[n].name,k=d[n].code,m=d[n].id,f.flightStore.setAttr("dmode","1"));if(e&&e.length>0)for(var n=0,o=e.length;o>n;n++)c&&""!=c&&(e[n].code.toLowerCase()==c.toLowerCase()||e[n].name==decodeURI(c)||e[n].id==c)&&(i=e[n].name,h=e[n].code,j=e[n].id,g=!0,f.flightStore.setAttr("amode","2")),b&&""!=b&&(e[n].code.toLowerCase()==b.toLowerCase()||e[n].name==decodeURI(b)||e[n].id==b)&&(l=e[n].name,k=e[n].code,m=e[n].id,g=!0,f.flightStore.setAttr("dmode","2"));(""==j||""==i)&&(h=f.flightStore.getSearchDetails(0,"aCtyCode")||"SHA",j=f.flightStore.getSearchDetails(0,"akey")||2,i=f.flightStore.getSearchDetails(0,"acityName")||"上海"),(""==m||""==l)&&(k=f.flightStore.getSearchDetails(0,"dCtyCode")||"BJS",m=f.flightStore.getSearchDetails(0,"dkey")||2,l=f.flightStore.getSearchDetails(0,"dcityName")||"北京"),a-2==0?(f.flightStore.setSearchDetails(0,"dCtyCode",k),f.flightStore.setSearchDetails(0,"dcityName",l),f.flightStore.setSearchDetails(0,"dkey",m),f.flightStore.setSearchDetails(0,"aCtyCode",h),f.flightStore.setSearchDetails(0,"acityName",i),f.flightStore.setSearchDetails(0,"akey",j),f.flightStore.setSearchDetails(1,"aCtyCode",k),f.flightStore.setSearchDetails(1,"acityName",l),f.flightStore.setSearchDetails(1,"akey",m),f.flightStore.setSearchDetails(1,"dCtyCode",h),f.flightStore.setSearchDetails(1,"dcityName",i),f.flightStore.setSearchDetails(1,"dkey",j)):(f.flightStore.setSearchDetails(0,"dCtyCode",k),f.flightStore.setSearchDetails(0,"dcityName",l),f.flightStore.setSearchDetails(0,"dkey",m),f.flightStore.setSearchDetails(0,"aCtyCode",h),f.flightStore.setSearchDetails(0,"acityName",i),f.flightStore.setSearchDetails(0,"akey",j),f.flightStore.removeSearchDetails(1)),f.flightStore.setAttr("ticketIssueCty",l),f.flightStore.setCurSearchDetails([0]),f.els.eldepartcity_w.find("em").html(l),f.els.elbackcity_w.find("em").html(i);var q=f.flightStore.getAttr("amode"),r=f.flightStore.getAttr("dmode");if(0,2==q||2==r){f.$el.find(".passenger").show();var s=f.flightStore.getAttr("passengerType");1==s?(f.$el.find(".passengerType").html("成人"),f.$el.find(".tips").hide()):(f.$el.find(".passengerType").html("儿童"),f.$el.find(".tips").show())}else f.$el.find(".passenger").hide()}},updatePage:function(a){var b=this,c=""!=b.getQueryStringByName("SearchType")&&null!=b.getQueryStringByName("SearchType")?b.getQueryStringByName("SearchType"):""!=b.getQueryStringByName("flighttype")&&null!=b.getQueryStringByName("flighttype")?b.getQueryStringByName("flighttype"):""!=b.getQueryStringByName("trip")&&null!=b.getQueryStringByName("trip")?b.getQueryStringByName("trip"):"";c=c.toLowerCase(),"d"==c?c=2:"s"==c&&(c=1);var d=b.flightStore.getAttr("tabtype")||1;""!=c&&(b.flightStore.setAttr("tabtype",c),b.flightStore.setAttr("__tripType",c),b.flightStore.setAttr("tripType",c),d=c);var e=""!=b.getQueryStringByName("dday")&&null!=b.getQueryStringByName("dday")?parseInt(b.getQueryStringByName("dday")):""!=b.getQueryStringByName("dayoffset")&&null!=b.getQueryStringByName("dayoffset")?parseInt(b.getQueryStringByName("dayoffset")):"";if(0==isNaN(e)&&e>0){var f=new n.Date(n.getServerDate()).addDay(e).format("Y/m/d"),g=new n.Date(n.getServerDate()).addDay(e+1).format("Y/m/d");d-2==0?(b.flightStore.setSearchDetails(0,"date",f),b.flightStore.setSearchDetails(1,"date",g)):b.flightStore.setSearchDetails(0,"date",f)}var h=""!=b.getQueryStringByName("dcity")&&null!=b.getQueryStringByName("dcity")?b.getQueryStringByName("dcity"):""!=b.getQueryStringByName("_dcity")&&null!=b.getQueryStringByName("_dcity")?b.getQueryStringByName("_dcity"):""!=b.getQueryStringByName("departure")&&null!=b.getQueryStringByName("departure")?b.getQueryStringByName("departure"):"",i=""!=b.getQueryStringByName("acity")&&null!=b.getQueryStringByName("acity")?b.getQueryStringByName("acity"):""!=b.getQueryStringByName("_acity")&&null!=b.getQueryStringByName("_acity")?b.getQueryStringByName("_acity"):""!=b.getQueryStringByName("arrival")&&null!=b.getQueryStringByName("arrival")?b.getQueryStringByName("arrival"):"";if(""!=h||""!=i){var j=null,k=null;null!=b.flightCityListStore.get()&&null!=b.flightInterCityListStore.get()?(j=b.flightCityListStore.get(),k=b.flightInterCityListStore.get(),b.renderPage(d,h,i,j.cities,k.cities)):(b.showLoading(),b.baseDataModel.excute(function(a){b.hideLoading(),b.renderPage(d,h,i,a.flightCityList.cities,a.flightInterCityList.cities)},function(){b.hideLoading()},b,b))}else{var l=b.flightStore.getSearchDetails(0,"dcityName"),m=b.flightStore.getSearchDetails(0,"acityName");b.els.eldepartcity_w.find("em").html(l),b.els.elbackcity_w.find("em").html(m),p.setAttr("DCity",l),p.setAttr("ACity",m);var q=b.flightStore.getAttr("amode"),r=b.flightStore.getAttr("dmode");if(2==q||2==r){b.$el.find(".passenger").show();var s=b.flightStore.getAttr("passengerType");1==s?(b.$el.find(".passengerType").html("成人"),b.$el.find(".tips").hide()):(b.$el.find(".passengerType").html("儿童"),b.$el.find(".tips").show())}else b.$el.find(".passenger").hide()}b.els.eldepartcity_w.find("span").removeClass(),b.els.elbackcity_w.find("span").removeClass(),b.switchTab(parseInt(d));var t=this.getQuery("sourceid");if(t&&+t>0){for(var u=0,v=["497","1107","1108","3516","3512","3511","3503","3513","1595","1596","3524","3517","3518","1591","1825","1826","1827","1828","1829","1830","1831"],w=0,x=v.length;x>w;w++){var y=v[w];if(y==t){u=1;break}}u&&this.footer.checkForceDownload(t)}var z=o.get();(t&&(1575==+t||1867==+t)||z&&z.sid&&(1575==+z.sid||1867==+z.sid))&&(this.$el.find("#in_footer").hide(),this.$el.find("#js_return").hide(),this.footer&&this.footer.hide(),this.hasAd=!1);var A=1===this.flightStore.getAttr("tabtype")?"OW":"RT";p.setAttr("FlightType",A),a.call(this)},createCalendar:function(){var a=this.getServerDate(),b=this,c=this.flightStore.getSearchDetails(0,"date"),d=this.flightStore.getSearchDetails(1,"date");c=c?n.Date.parse(c).valueOf():this.getServerDate(),a>c&&(c=a,this.flightStore.setSearchDetails(0,"date",n.Date.format(c,"Y/m/d"))),d=d?n.Date.parse(d).valueOf():new n.Date(c).addDay(1).valueOf();var b=this;this.calendar=new q({Months:13,date:{start:{headtitle:"出发日期选择",title:function(a,b){var c="<em>"+b(a)+"</em><i>出发</i>";return c},value:c},back:{headtitle:"返程日期选择",title:function(a,b){var c="<em>"+b(a)+"</em><i>返回</i>";return c},value:d,bound:{rules:{">":"start"},error:function(){b.showToast("请选择比出发日期更晚的时间",1)}}}},title:"出发日期选择",callback:function(a,c,d,e,f){var g=d.start,h=d.back;"start"===c&&g>=h&&this.setDate(f>g?{back:new n.Date(g).addDay(1).valueOf(),start:g}:{back:new Date(g),start:g}),b.setPanelDate.apply(b,arguments),this.hide()},onShow:function(){b.$el.hide(),b.setCalendarUbt()},onHide:function(){window.scrollTo(0,0),b.$el.show(),b.recoverIndexUbt()}}),this.calendar.create(),this.flightStore.setAttr("calendarendtime",n.Date.format(this.calendar.getEndDate(),"Y/m/d H:i:s"))},setPanelDate:function(a,b,c,d){var e,a,d;for(var f in c)switch(e=[],a=c[f],d=this.calendar.getDateInfo(a),d.chineseday&&e.push(d.chineseday),d.holiday&&e.push(d.holiday),d.daytitle&&(e=[d.daytitle]),e.push(d.week),f){case"start":this.els.eldepartDatetop.html(n.Date.format(a,"m月d日")),this.els.eldepartDatebottom.html(e[0]),this.flightStore.setSearchDetails(0,"date",n.Date.format(a,"Y/m/d"));try{p.setAttr("DTime",n.Date.format(a,"Y/m/d"))}catch(g){0}break;case"back":this.els.elbackDatetop.html(n.Date.format(a,"m月d日")),this.els.elbackDatebottom.html(e[0]),this.flightStore.setSearchDetails(1,"date",n.Date.format(a,"Y/m/d"));try{p.setAttr("ATime",n.Date.format(a,"Y/m/d"))}catch(g){0}}},onCreate:function(){this.render(),this.createCalendar(),this.baseDataModel=new g({models:{flightCityList:f.FlightCityListModel.getInstance(),flightInterCityList:f.FlightInterCityListModel.getInstance()}})},onLoad:function(){$("meta[name='viewport']").attr("content","width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no");for(var a=document.getElementsByTagName("meta"),b=0;b<a.length;b++)"viewport"==a[b].getAttribute("name")&&a[b].setAttribute("content","width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no");this.isShowData=!0;var c="";if(window.localStorage&&null!=window.localStorage.getItem("SALES")&&""!=window.localStorage.getItem("SALES")){var d=JSON.parse(window.localStorage.getItem("SALES"));null!=d.data&&(c=parseInt(d.data.sourceid))}o.get();if(449843==this.getQuery("sid")||449843==this.getQueryStringByName("sid")||this.getQueryStringByName("sid")+""=="449843"){var e=this.getQueryStringByName("os")||this.getQuery("os")||1,f=this.getQueryStringByName("osver")||this.getQuery("osver")||"2.18";u.setAttr("osType",e),u.setAttr("osVer",f),u.setAttr("isCCB",!0)}try{window["h5.flt.homepage.speed"].updatePageBegin=Date.now()}catch(g){}this.updatePage(function(){try{window["h5.flt.homepage.speed"].updatePageEnd=Date.now()}catch(a){}this.turning();try{window["h5.flt.homepage.speed"].end=Date.now(),"undefined"==typeof window.__bfi&&(window.__bfi=[]);var b={onloadTime:window["h5.flt.homepage.speed"].end-window["h5.flt.homepage.speed"].begin,updatePageTime:window["h5.flt.homepage.speed"].updatePageEnd-window["h5.flt.homepage.speed"].updatePageBegin};window.__bfi.push(["_tracklog","h5.flt.homepage.speed",JSON.stringify(b)])}catch(a){}})},onShow:function(){this.setTitle("机票搜索页")},onHide:function(){this.resizehandler&&$(window).unbind("resize",this.resizehandler),$("meta[name='viewport']").attr("content","width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"),this.hideLoading()},checkUcStore:function(){if(navigator.userAgent.indexOf(" UCBrowser")>-1){this.flightStore.setAttr("rcsay","imbad");var a=this.flightStore.getAttr("rcsay");"imbad"!=a&&window.location.reload()}},setCalendarUbt:function(){this.pageid="214278"},recoverIndexUbt:function(){this.pageid="212003"},selectPassenger:function(){var a=this,c=this.$el.find(".passenger"),d=[{key:"成人"},{key:"儿童(2～12岁)"}],e=1==a.flightStore.getAttr("passengerType")?0:1;s=new b.ui.ScrollRadioList({title:"乘客类型",index:c.attr("index"),index:e,data:d,content:1,disItemNum:3,itemClick:function(b){var c=1==b.index?2:1;a.flightStore.setAttr("passengerType",c),2==c?(a.$el.find(".tips").show(),a.$el.find(".passengerType").html("儿童")):(a.$el.find(".tips").hide(),a.$el.find(".passengerType").html("成人"))}}),s.show()},checkin:function(){p.setAttr("IsChooseSeat",!0);try{this.mdSubmit()}catch(a){0}this.jump("/webapp/flight/#checkin")},flightSchedule:function(){p.setAttr("IsFlightSituation",!0);try{this.mdSubmit()}catch(a){0}this.jump("/html5/Flight/Schedule/")},mdSubmit:function(){e.sendUbt(m,p.get()),p.remove()}});return v});