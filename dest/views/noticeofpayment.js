define(["libs","c","CommonStore","FlightStore","FlightModel","cBasePageView","utility/utility.js","cUtilityCrypt"],function(a,b,c,d,e,f,g){var h=e.PaymentModel.getInstance(),i=d.FlightBookingResultStore.getInstance(),j={getRequestData:function(a){var b=location.hash.replace(/^.*?\?/,"").replace(/\|.*$/,""),c=new g.QueryStringBuilder(b),d=c.get()||{};return j.getRequestData=function(a){return a?d[a]:{optype:1,orderinfo:{eno:d.externalNo,oid:d.orderID},btype:101,ver:0,payetype:d.payType}},a?d[a]:{optype:1,orderinfo:{eno:d.externalNo,oid:d.orderID},btype:101,ver:0,payetype:d.payType}},bookingCheck:function(a,b){0,0,a&&h.setParam(a),h.excute(function(a){var c=!1;b&&b(c,a)},function(a){b&&b(a)},!1,this,function(){})}},k={requestError:function(a,b){var c=i.get()||{};b=b||{},c.errorMsg=b.resultmsg||b.msg||"支付失败,请稍后再试。",c.rc=!1,i.set(c);var d=j.getRequestData("orderID"),e="orderresults?rc=1&type=flight&orderid="+d;0,a.forward(e)},paySuccess:function(a,b){i.get()||{};if(0===b.result){var c=j.getRequestData("orderID"),d="orderresults?rc=0&type=flight&orderid="+c;0,a.forward(d)}else k.requestError(a,b)}},l=f.extend({pageid:"",ordervalue:null,onCreate:function(){},onLoad:function(){var a=this;a.showLoading();var b=j.getRequestData();a.ordervalue=b.ordervalue,j.bookingCheck(b,function(b,c){var d=k.requestError,e=k.paySuccess;b?d(a,b):e(a,c),a.hideLoading()}),this.turning()},onShow:function(){},onHide:function(){this.hideLoading()}});return l});