define(["libs","c","CommonStore","FlightStore","FlightModel","cBasePageView","cUtility","cWidgetFactory","cWidgetGuider"],function(a,b,c,d,e,f){var g=(b.ui,b.base,c.SalesObjectStore.getInstance(),d.FlightOrderParamStore.getInstance()),h=(d.FlightAircraftStore.getInstance(),e.FlightAircraftModel.getInstance(),d.FlightOrderDetailStore.getInstance(),d.FlightOrderInfoStore.getInstance(),d.FlightPickTicketSelectStore.getInstance(),d.FlightTicketChangeForm.getInstance(),d.FlightTicketRefundFormStore.getInstance(),e.FlightOrderDetailModel.getInstance()),i=(e.OrderCancelModel.getInstance(),e.ExpressStatusSearchModel.getInstance(),c.UserStore.getInstance()),j=i.getUser(),k=f.extend({pageid:"",getAppUrl:function(){var a=this,b="";if(i&&i.getUser()){var c="";if(window.localStorage&&null!=window.localStorage.getItem("SALES")&&""!=window.localStorage.getItem("SALES")){var d=JSON.parse(window.localStorage.getItem("SALES"));null!=d.data&&(c=d.data.sourceid)}var e=a.orderID.get().Id;b="/flight_inland_refund?c1="+e+"&UserID="+i.getUser().LoginName+"&extendSourceID="+c}return b},erroJump:function(){var a=this;a.showToast("订单查询失败。",1,function(){a.jump("/webapp/flight/index.html")})},getFlightOrderDetail:function(a){var b=this;b.showLoading(),h.setParam("id",a),h.excute(function(a){if(b.hideLoading(),null!=a){if(null!=a.passengers&&0==a.passengers.length)return b.erroJump(),!1;a.tripType&&b.jump(1==a.tripType?"/webapp/flight/index.html#ticketrefundsingle":"/webapp/flight/index.html#ticketrefundmultiple")}else b.erroJump()},function(){b.hideLoading(),b.erroJump()})},onCreate:function(){},onLoad:function(){var a=this;a.turning(),a.showLoading(),j=i.getUser();var b="/webapp/flight/index.html";j&&j.Auth?this.request.query.oid?(g.setAttr({Id:this.request.query.oid,url:"flight_order_list"}),a.getFlightOrderDetail(this.request.query.oid)):a.jump(b):(b="/webapp/myctrip/#account/login?from="+encodeURIComponent(this.getRoot()+"#ticketrefund?oid="+this.request.query.oid),a.jump(b))},onShow:function(){},onHide:function(){this.hideLoading()}});return k});