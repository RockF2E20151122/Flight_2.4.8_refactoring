define(["libs","c","cUI","CommonStore","FlightStore","FlightModel","cBasePageView",buildViewTemplatesPath("checkinprotocol.html"),"cWidgetFactory"],function(a,b,c,d,e,f,g,h){var i,j=d.UserStore.getInstance(),k=(j?j.getUser():null,f.CheckinSearchModel.getInstance()),l=e.CheckinParamStore.getInstance(),m=null;return i=g.extend({tpl:h,backUrl:"checkinbooking",title:"",checkinParamData:null,events:{"click #js_return":"backAction"},ready:function(){this.$el.html(this.tpl),this.elsBox={checkin_show_box:this.$el.find("#checkin_show_box"),checkin_protocol_tpl:this.$el.find("#checkin_protocol_tpl"),checkin_notice_tpl:this.$el.find("#checkin_notice_tpl"),dangerous_notice_tpl:this.$el.find("#dangerous_notice_tpl")},this.checkin_protocol_fun=_.template(this.elsBox.checkin_protocol_tpl.html()),this.checkin_notice_fun=_.template(this.elsBox.checkin_notice_tpl.html()),this.dangerous_notice_fun=_.template(this.elsBox.dangerous_notice_tpl.html())},onCreate:function(){this.showLoading(),this.ready()},onLoad:function(){switch(this.showLoading(),m=this,k.url=j.isLogin()?"/Flight/Domestic/CheckIn/AircraftRulesSearch":"/Flight/Domestic/CheckIn/NonMemberAircraftRulesSearch",this.checkinParamData=l.get()||{noticeType:-1},this.checkinParamData.noticeType){case 0:this.title="值机协议";break;case 1:this.title="值机须知";break;case 2:this.title="危险品公告"}this.$el.find(".flight-header h1").html(this.title),this.renderCheckinbox(function(){m.turning(),m.hideLoading()})},backAction:function(){this.back(m.backUrl)},renderCheckinbox:function(a){if(0===this.checkinParamData.noticeType)k.setParam(this.checkinParamData),k.excute(function(b){b.aplst.length&&this.elsBox.checkin_show_box.html(this.checkin_protocol_fun({agrnt:b.aplst[0].agrnt.replace(/\n/g,"</br>")})),a&&a()},function(){a&&a()},!1,this);else if(1===this.checkinParamData.noticeType)this.elsBox.checkin_show_box.html(this.checkin_notice_fun({})),a&&a();else if(2===this.checkinParamData.noticeType)this.elsBox.checkin_show_box.html(this.dangerous_notice_fun({})),a&&a();else{var c=new b.ui.HeadWarning;c.setTitle("提示信息","哎呀，数据出错了！",function(){m.back(m.backUrl)}),c.show()}},onShow:function(){this.setTitle(this.title)},onHide:function(){this.elsBox.checkin_show_box.empty(),this.hideLoading()}})});